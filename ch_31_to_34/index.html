<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Assignment 31-34</title>
</head>
<body>
    <script>
        var name = prompt("Enter your name", "Syed Adeel Iqbal")
        var dobDay = +prompt("Enter your Date of Birth Day", "21")
        var dobMonth = +prompt("Enter your Date of Birth Month (0 is Jan, 1 is Feb, ..)", "02")
        var dobYear = +prompt("Enter your Date of Birth Year", "1983")

        var currentDate = new Date();
        var hour = currentDate.getHours();
        var messageByTime;
        if(hour >= 5 && hour < 12){
            messageByTime = "Good Morning"
        }
        else if(hour >= 12 && hour < 17){
            messageByTime = "Good Afternoon"
        }
        else if(hour >= 17 && hour < 5){
            messageByTime = "Good Evening"
        }

        console.log(`Hello ${name}, ${messageByTime}`)
        var dobDate = new Date(dobYear, dobMonth, dobDay)
        console.log(`Your DOB is ${dobDate}`)

        var dobDateDiffMs = currentDate - dobDate; 
        var dobDateDiffDays = dobDateDiffMs/(1000 * 60 * 60 * 24)
        var d = new Date(dobDateDiffMs);

        var years = currentDate.getFullYear() - dobDate.getFullYear();

        if(new Date(currentDate.getFullYear(), dobMonth, dobDay) > currentDate) // birthday is yet to come this year
        {
            years--;
        }
        console.log(`Current Year ${currentDate.getFullYear()} - Dob Full year ${dobDate.getFullYear()}`)

        console.log(`You are ${years} years ${d.getMonth()} Month ${d.getDate()- 1} days ${d.getHours()} Hours ${d.getMinutes()} Minutes ${d.getSeconds()} Seconds old`)
        console.log(`Your age in days is  ${Math.floor(dobDateDiffDays)}`)

        // Next Birthday
        // if birthday this year has passed then next birthday is in next year otherwise this eyar
        var nextBirthdayYear;
        if(new Date(currentDate.getFullYear(), dobMonth, dobDay) > currentDate) // birthday is yet to come this year
        {
            nextBirthdayYear = currentDate.getFullYear()
        }
        else{
            nextBirthdayYear = currentDate.getFullYear() + 1
        }

        var nextBirthDayMs = new Date(nextBirthdayYear, dobMonth, dobDay) - currentDate
        var nextBirthDayDiffDate = new Date(nextBirthDayMs)

        if(currentDate.getDate() == dobDate.getDate() && currentDate.getMonth() == dobDate.getMonth()){
            console.log(`Happy Birth ${name}. Today is your ${years}th birthday `)
        }        
        else
        console.log(`Time left for next birthday ${Math.floor(nextBirthDayMs/(1000 * 60 * 60 * 24))} days ${nextBirthDayDiffDate.getHours()} hours ${nextBirthDayDiffDate.getMinutes()} minutes ${nextBirthDayDiffDate.getSeconds()} seconds `);
    </script>
</body>
</html>